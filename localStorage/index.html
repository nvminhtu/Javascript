<!DOCTYPE html>
<html>
<head>
	<title>Window Local Storage</title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js" type="text/javascript"></script>
<script ></script>
</head>
<body>
    <p>Question 1</p>
    <div class="quiz" id="ques01">
        <label><input type="checkbox" name="favorite" id="opt1" value="val1">Option 1</label>
        <label><input type="checkbox" name="favorite" id="opt2" value="val2">Option 2</label>
        <label><input type="checkbox" name="favorite" id="opt3" value="val3">Option 3</label>
        <label><input type="checkbox" name="favorite" id="opt4" value="val4">Option 4</label>
    </div>
    <p>Question 2</p>
    <div class="quiz" id="ques02">
       <label><input type="checkbox" name="favorite" id="opt1" value="val1">Option 1</label>
        <label><input type="checkbox" name="favorite" id="opt2" value="val2">Option 2</label>
        <label><input type="checkbox" name="favorite" id="opt3" value="val3">Option 3</label>
        <label><input type="checkbox" name="favorite" id="opt4" value="val4">Option 4</label>
    </div>
    <p>Question 3</p>
     <div class="quiz active" id="ques03">
       <label><input type="checkbox" name="favorite" id="opt1" value="val1">Option 1</label>
        <label><input type="checkbox" name="favorite" id="opt2" value="val2">Option 2</label>
        <label><input type="checkbox" name="favorite" id="opt3" value="val3">Option 3</label>
        <label><input type="checkbox" name="favorite" id="opt4" value="val4">Option 4</label>
    </div>
    <input id="addChoice" type="submit" value="Submit">
    <input id="nextQues" type="button" value="Next" onclick="clickNext();">
    <p>Result:</p>
    <div id="result"></div>
</body>
<script>
    var quiz = $('.quiz'),
        lengthQuiz =quiz.length;

    // check checked is checked
    $.each(quiz,function(index,item){

        var thisQuiz = $(this).attr('id'),
            thisChecks = "#"+ thisQuiz + " input[name='favorite']";
        
        //step 1: check div wrapper is active or not - enable check
        if($(this).hasClass('active')){
            $(thisChecks).change(function () {
                
                var 
                    answers = {},
                    values = [],
                    items =  $(thisChecks);

                $.each(items,function(index,item){
                    if($(item).prop('checked')) {
                        //values.push($(item).val());
                        var $keyItem = $(item).attr('id');
                        answers[$keyItem] = $(item).val();
                    }
                });

                var thisChecked = thisQuiz+'-data',
                    thisAnswer = {question: thisQuiz, answer: answers };
                localStorage.setItem(thisChecked,JSON.stringify(thisAnswer));
                
                console.log(localStorage.getItem(thisChecked));        
            });
            
        }
    });
    

    // func: get/keep current step if click next or refresh page
    function clickNext() {

        //get current id of question
        var currentItem = localStorage.getItem('step');

        localStorage.setItem('step','ques1');
        if(currentItem!==null) {
            currentItem += 1;
        } else {
            localStorage.setItem('step','start');
        }

        console.log(currentItem);
        //transition to next question
        //....
    }
    
    // func: init LocalStorage
    function InitLocalStorage() {
        //setup defaul localStorage
        // for(var i=0 ; i < lengthQuiz; i++) {
               
        // }
    }
    
    // func: show result
    function showResult() {
        
        var result = '';
        for(var i=1 ; i < lengthQuiz + 1; i++) {
            var getQues = 'ques0'+ i + '-data';
            var quesData = JSON.parse(localStorage.getItem(getQues));
            if(quesData!==null) {
                var 
                    question = quesData.question,
                    answers = quesData.answer;
                
                result += 'Question ' + i + ': ' + question + " <br> ";
                console.log(result);
                
            }
        }
        var resultTG = $('#result');
        resultTG.text(result);             

    }
    // F5: load answer option checked to question

    //init()
    showResult();
</script>
</html>